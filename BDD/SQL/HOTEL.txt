CREATE TABLE TIPOS(
	CODIGO CHAR(9),
	NOMBRE VARCHAR2(20) NOT NULL,
	CONSTRAINT PK_TIPOS PRIMARY KEY (CODIGO)
	);
CREATE TABLE PAISES(
	CODIGO CHAR(3),
	NOMBRE VARCHAR2(50) NOT NULL,
	CONSTRAINT PK_PAISES PRIMARY KEY (CODIGO)
	);
CREATE TABLE TEMPORADAS(
	CODIGO CHAR(9),
	NOMBRE VARCHAR2(15) NOT NULL,
	CONSTRAINT PK_TEMPORADAS PRIMARY KEY (CODIGO)
	);
CREATE TABLE CLIENTES(
	DNI CHAR(9),
	NOMBRE VARCHAR2(50) NOT NULL,
	TELEFONO CHAR(9),
	DOMICILIO VARCHAR2(50),
	POBLACION VARCHAR2(50),
	PROVINCIA VARCHAR2(20),
	CP VARCHAR2(5),
	PAIS CHAR(3) NOT NULL,
	FECHA_NAC DATE NOT NULL,
	SEXO CHAR(1),
	CONSTRAINT PK_CLIENTES PRIMARY KEY (DNI),
	CONSTRAINT FK_CLIENTES_PAISES FOREIGN KEY (PAIS)
		REFERENCES PAISES ON DELETE CASCADE,
	CONSTRAINT CK_CLIENTES_SEXO CHECK(SEXO IN('H','M'))
	);
CREATE TABLE HABITACIONES(
	CODIGO NUMBER(3),
	TIPO CHAR(9) NOT NULL,
	BANIO CHAR(1) NOT NULL,
	PREPARADA CHAR(1) NOT NULL,
	CONSTRAINT PK_HABITACIONES PRIMARY KEY (CODIGO),
	CONSTRAINT FK_HABITACIONES_TIPOS FOREIGN KEY (TIPO)
		REFERENCES TIPOS ON DELETE CASCADE,
	CONSTRAINT CK_HABITACIONES_BANIO CHECK (BANIO IN('S','N'))
	);
CREATE TABLE PRECIOS(
	TIPO CHAR(9),
	TEMPORADA CHAR(9),
	OCUPANTES NUMBER(1) NOT NULL,
	PRECIO NUMBER(6,2) NOT NULL,
	CONSTRAINT PK_PRECIOS PRIMARY KEY (TIPO,TEMPORADA,OCUPANTES),
	CONSTRAINT FK_PRECIOS_TIPOS FOREIGN KEY (TIPO)
		REFERENCES TIPOS ON DELETE CASCADE,
	CONSTRAINT FK_PRECIOS_TEMPORADAS FOREIGN KEY (TEMPORADA)
		REFERENCES TEMPORADAS ON DELETE CASCADE
	);
CREATE TABLE INCIDENCIAS(
	DNI CHAR(9),
	HABITACION NUMBER(3),
	FEC_ENTRADA DATE NOT NULL,
	FEC_SALIDA_PREVISTA DATE NOT NULL,
	FEC_SALIDA_REAL DATE NOT NULL,
	OCUPANTES NUMBER(1) NOT NULL,
	TEMPORADA CHAR(9) NOT NULL,
	CUNA NUMBER(4,3) NOT NULL,
	RESERVA CHAR(1) NOT NULL,
	TIPO CHAR(9) NOT NULL,
	CONSTRAINT PK_INCIDENCIAS PRIMARY KEY (DNI,HABITACION,FEC_ENTRADA),
	CONSTRAINT FK_INCIDENCIAS_CLIENTES FOREIGN KEY (DNI)
		REFERENCES CLIENTES ON DELETE CASCADE,
	CONSTRAINT FK_INCIDENCIAS_HABITACIONES FOREIGN KEY (HABITACION)
		REFERENCES HABITACIONES ON DELETE CASCADE,
	CONSTRAINT FK_INCIDENCIAS_PRECIOS FOREIGN KEY (TIPO,TEMPORADA,OCUPANTES)
		REFERENCES PRECIOS ON DELETE CASCADE,
	CONSTRAINT CK_INCIDENCIAS_RESERVA CHECK (RESERVA IN('S','N'))
	);